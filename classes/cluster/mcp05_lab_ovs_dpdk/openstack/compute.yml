classes:

- system.linux.system.repo.mcp10

- system.linux.system.repo.saltstack_2016_3_trusty
- system.nova.compute.nfv.hugepages
- system.nova.compute.nfv.cpu_pinning
- system.nova.compute.cluster
- system.neutron.compute.cluster
- system.ceilometer.agent.cluster
- cluster.mcp05_lab_ovs_dpdk
parameters:
  _param:
    cluster_vip_address: ${_param:openstack_control_address}
    cluster_local_address: ${_param:control_address}
    cluster_node01_hostname: ctl01
    cluster_node01_address: ${_param:openstack_control_node01_address}
    cluster_node02_hostname: ctl02
    cluster_node02_address: ${_param:openstack_control_node02_address}
    cluster_node03_hostname: ctl03
    cluster_node03_address: ${_param:openstack_control_node03_address}
    nova_vncproxy_url: http://${_param:openstack_proxy_address}:6080
    primary_interface: eth0
    external_interface: eth1
    linux_system_codename: xenial
  neutron:
    compute:
      dpdk: True
  linux:
    network:
      bridge: openvswitch
      dpdk:
        enabled: true
        driver: uio
      openvswitch:
        pmd_cpu_mask: "0x6"
        dpdk_socket_mem: "1024"
        dpdk_lcore_mask: "0x400"
        memory_channels: "2"
      interface:
        bond0.2416:
          enabled: true
          proto: manual
          type: vlan
          use_interfaces:
          - bond0
        bond0.2417:
          enabled: true
          proto: manual
          type: vlan
          use_interfaces:
          - bond0
        br_ctl:
          enabled: true
          type: bridge
          proto: static
          address: ${_param:control_address}
          netmask: 255.255.255.192
          use_interfaces:
          - bond0.2416
        br_data:
          enabled: true
          type: bridge
          proto: static
          address: ${_param:single_address}
          netmask: 255.255.255.0
          use_interfaces:
          - bond0.2417
        dpdk0:
          name: enp5s0f1
          pci: "0000:05:00.1"
          driver: igb_uio
          bond: dpdkbond0
          enabled: true
          type: dpdk_ovs_port
          n_rxq: 2
        dpdk1:
          name: enp5s0f2
          pci: "0000:05:00.2"
          driver: igb_uio
          bond: dpdkbond0
          enabled: true
          type: dpdk_ovs_port
          n_rxq: 2
        dpdkbond0:
          enabled: true
          bridge: br-prv
          type: dpdk_ovs_bond
          mode: active-backup
        br-prv:
          enabled: true
          type: dpdk_ovs_bridge
